package com.exanimo.gallery.parsers{	import com.exanimo.gallery.*;	import com.exanimo.gallery.data.*;	import com.exanimo.gallery.parsers.*;	public class GalleryDataParser implements IGalleryDataParser	{			public function parse(data:XML):GalleryModel		{			var prop:XML;			var model:GalleryModel = new GalleryModel();						// Set the model properties			for each (prop in data.attributes())			{				model[String(prop.localName())] = String(prop);			}			// Create the groups.			model.groups = new GalleryGroupMap();			for each (var groupXML:XML in data.group)			{				var group:GalleryGroupData = new GalleryGroupData();								// Set the group properties.				for each (prop in groupXML.attributes())				{					group[String(prop.localName())] = String(prop);				}				// Create the items.				for each (var itemXML:XML in groupXML.item)				{					var item:GalleryItemData = new GalleryItemData();										// Set the group properties.					for each (prop in itemXML.attributes())					{						item[String(prop.localName())] = String(prop);					}					item.group = group;										group.items.addItem(item);				}								if (!group.name)				{					throw new Error("Gallery group elements must have a name attribute.");				}				else				{					model.groups.putItemAt(group, group.name);				}			}						return model;		}			}}